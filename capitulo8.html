<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cap√≠tulo 8: Fun√ß√µes - Curso Python</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', monospace;
            white-space: pre;
            line-height: 1.6;
            tab-size: 4;
            overflow-x: auto;
            font-size: 0.875rem;
        }
        .solution {
            display: none;
        }
        .solution.show {
            display: block;
        }
        .concept-box {
            border-left: 4px solid #3b82f6;
            background-color: #eff6ff;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning-box {
            border-left: 4px solid #f59e0b;
            background-color: #fffbeb;
            padding: 1rem;
            margin: 1rem 0;
        }
    
        
        @media (max-width: 640px) {
            .code-block {
                font-size: 0.75rem;
                padding: 0.75rem;
            }
            .container {
                padding-left: 0.5rem;
                padding-right: 0.5rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-4 md:py-8">
        <div class="bg-white rounded-lg shadow-lg p-4 md:p-8">
            <div class="mb-6">
                <a href="curso-python-completo.html" class="text-blue-600 hover:text-blue-800 font-medium">&larr; Voltar ao Curso</a>
            </div>
            
            <h1 class="text-2xl md:text-4xl font-bold text-gray-800 mb-6 md:mb-8">Cap√≠tulo 8: Fun√ß√µes</h1>
            
            <div class="space-y-6 md:space-y-8">
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">8.1 Introdu√ß√£o √†s Fun√ß√µes</h2>
                    <p class="text-gray-600 mb-4">
                        Fun√ß√µes s√£o blocos de c√≥digo reutiliz√°veis que executam uma tarefa espec√≠fica. 
                        Elas ajudam a organizar o c√≥digo, evitar repeti√ß√£o e tornar programas mais leg√≠veis.
                    </p>
                    
                    <div class="concept-box">
                        <h3 class="font-semibold text-blue-800 mb-2">Por que usar fun√ß√µes?</h3>
                        <ul class="list-disc list-inside text-blue-700">
                            <li><strong>Reutiliza√ß√£o:</strong> Escreva uma vez, use v√°rias vezes</li>
                            <li><strong>Organiza√ß√£o:</strong> Divide problemas complexos em partes menores</li>
                            <li><strong>Manuten√ß√£o:</strong> Facilita corre√ß√µes e melhorias</li>
                            <li><strong>Legibilidade:</strong> C√≥digo mais claro e compreens√≠vel</li>
                        </ul>
                    </div>
                    
                    <div class="code-block mb-4">
# Definindo uma fun√ß√£o simples
def saudacao():
    print("Ol√°! Bem-vindo ao curso de Python!")

# Chamando a fun√ß√£o
saudacao()
saudacao()  # Pode ser chamada quantas vezes quiser

# Fun√ß√£o que retorna um valor
def obter_nome_curso():
    return "Curso Completo de Python"

# Usando o valor retornado
nome = obter_nome_curso()
print(f"Voc√™ est√° fazendo o: {nome}")

# Fun√ß√£o com c√°lculo
def calcular_quadrado(numero):
    resultado = numero ** 2
    return resultado

# Testando a fun√ß√£o
print(f"O quadrado de 5 √©: {calcular_quadrado(5)}")
print(f"O quadrado de 10 √©: {calcular_quadrado(10)}")
                    </div>
                </section>
                
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">8.2 Par√¢metros e Argumentos</h2>
                    <p class="text-gray-600 mb-4">
                        Par√¢metros s√£o vari√°veis definidas na fun√ß√£o. Argumentos s√£o os valores 
                        passados para a fun√ß√£o quando ela √© chamada.
                    </p>
                    
                    <div class="code-block mb-4">
# Fun√ß√£o com um par√¢metro
def cumprimentar(nome):
    print(f"Ol√°, {nome}! Como voc√™ est√°?")

cumprimentar("Maria")
cumprimentar("Jo√£o")

# Fun√ß√£o com m√∫ltiplos par√¢metros
def calcular_area_retangulo(largura, altura):
    area = largura * altura
    return area

# Chamando com argumentos posicionais
area1 = calcular_area_retangulo(5, 3)
print(f"√Årea do ret√¢ngulo: {area1}")

# Chamando com argumentos nomeados
area2 = calcular_area_retangulo(altura=4, largura=6)
print(f"√Årea do ret√¢ngulo: {area2}")

# Fun√ß√£o com par√¢metros padr√£o
def apresentar_pessoa(nome, idade=18, cidade="S√£o Paulo"):
    print(f"Nome: {nome}")
    print(f"Idade: {idade} anos")
    print(f"Cidade: {cidade}")
    print("-" * 20)

# Testando com diferentes combina√ß√µes
apresentar_pessoa("Ana")
apresentar_pessoa("Carlos", 25)
apresentar_pessoa("Beatriz", 30, "Rio de Janeiro")
apresentar_pessoa("Diego", cidade="Bras√≠lia")
                    </div>
                </section>
                
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">8.3 Tipos de Argumentos</h2>
                    <p class="text-gray-600 mb-4">
                        Python oferece diferentes formas de passar argumentos para fun√ß√µes.
                    </p>
                    
                    <div class="code-block mb-4">
# *args - argumentos posicionais vari√°veis
def somar_numeros(*numeros):
    total = 0
    for numero in numeros:
        total += numero
    return total

print(f"Soma de 1, 2, 3: {somar_numeros(1, 2, 3)}")
print(f"Soma de 10, 20, 30, 40: {somar_numeros(10, 20, 30, 40)}")
print(f"Soma de apenas 5: {somar_numeros(5)}")

# **kwargs - argumentos nomeados vari√°veis
def exibir_informacoes(**informacoes):
    print("Informa√ß√µes recebidas:")
    for chave, valor in informacoes.items():
        print(f"{chave}: {valor}")
    print()

exibir_informacoes(nome="Jo√£o", idade=25, profissao="Programador")
exibir_informacoes(produto="Notebook", preco=2500.00, marca="Dell")

# Combinando diferentes tipos de argumentos
def funcao_completa(obrigatorio, padrao="valor padr√£o", *args, **kwargs):
    print(f"Obrigat√≥rio: {obrigatorio}")
    print(f"Padr√£o: {padrao}")
    print(f"Args extras: {args}")
    print(f"Kwargs: {kwargs}")
    print("-" * 30)

funcao_completa("teste")
funcao_completa("teste", "novo valor")
funcao_completa("teste", "novo valor", 1, 2, 3)
funcao_completa("teste", "novo valor", 1, 2, 3, extra1="valor1", extra2="valor2")
                    </div>
                </section>
                
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">8.4 Escopo de Vari√°veis</h2>
    <p class="text-gray-600 mb-4">
                        O escopo determina onde uma vari√°vel pode ser acessada no c√≥digo.
                    </p>
                    
                    <div class="warning-box">
                        <h3 class="font-semibold text-amber-800 mb-2">‚ö†Ô∏è Aten√ß√£o ao Escopo</h3>
                        <p class="text-amber-700">
                            Vari√°veis locais s√≥ existem dentro da fun√ß√£o. Vari√°veis globais podem 
                            ser acessadas em qualquer lugar, mas modific√°-las requer a palavra-chave <code>global</code>.
                        </p>
                    </div>
                    
                    <div class="code-block mb-4">
# Vari√°vel global
contador_global = 0
nome_programa = "Sistema de Vendas"

def exemplo_escopo_local():
    # Vari√°vel local
    numero_local = 10
    print(f"Dentro da fun√ß√£o - n√∫mero local: {numero_local}")
    print(f"Dentro da fun√ß√£o - nome programa: {nome_programa}")

exemplo_escopo_local()
# print(numero_local)  # Erro! Vari√°vel local n√£o existe aqui

def modificar_contador():
    global contador_global
    contador_global += 1
    print(f"Contador incrementado para: {contador_global}")

print(f"Contador inicial: {contador_global}")
modificar_contador()
modificar_contador()
print(f"Contador final: {contador_global}")

# Exemplo com vari√°vel local que "esconde" a global
def exemplo_shadowing():
    nome_programa = "Sistema Local"  # Vari√°vel local com mesmo nome
    print(f"Dentro da fun√ß√£o: {nome_programa}")

print(f"Antes da fun√ß√£o: {nome_programa}")
exemplo_shadowing()
print(f"Depois da fun√ß√£o: {nome_programa}")

# Fun√ß√£o aninhada e escopo
def funcao_externa():
    x = 10
    
    def funcao_interna():
        nonlocal x  # Permite modificar vari√°vel da fun√ß√£o externa
        x += 5
        print(f"Fun√ß√£o interna - x: {x}")
    
    print(f"Antes da fun√ß√£o interna - x: {x}")
    funcao_interna()
    print(f"Depois da fun√ß√£o interna - x: {x}")

funcao_externa()
                    </div>
                </section>
                
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">8.5 Fun√ß√µes Lambda</h2>
                    <p class="text-gray-600 mb-4">
                        Fun√ß√µes lambda s√£o fun√ß√µes an√¥nimas de uma linha, √∫teis para opera√ß√µes simples.
                    </p>
                    
                    <div class="code-block mb-4">
# Fun√ß√£o normal vs fun√ß√£o lambda
def quadrado_normal(x):
    return x ** 2

quadrado_lambda = lambda x: x ** 2

print(f"Fun√ß√£o normal: {quadrado_normal(5)}")
print(f"Fun√ß√£o lambda: {quadrado_lambda(5)}")

# Lambda com m√∫ltiplos par√¢metros
somar = lambda a, b: a + b
multiplicar = lambda a, b, c: a * b * c

print(f"Soma: {somar(3, 7)}")
print(f"Multiplica√ß√£o: {multiplicar(2, 3, 4)}")

# Usando lambda com fun√ß√µes built-in
numeros = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# map() - aplica fun√ß√£o a cada elemento
quadrados = list(map(lambda x: x ** 2, numeros))
print(f"Quadrados: {quadrados}")

# filter() - filtra elementos
pares = list(filter(lambda x: x % 2 == 0, numeros))
print(f"N√∫meros pares: {pares}")

# sorted() com lambda como chave
pessoas = [
    {"nome": "Ana", "idade": 25},
    {"nome": "Bruno", "idade": 30},
    {"nome": "Carlos", "idade": 20}
]

# Ordenar por idade
pessoas_por_idade = sorted(pessoas, key=lambda pessoa: pessoa["idade"])
print("Pessoas ordenadas por idade:")
for pessoa in pessoas_por_idade:
    print(f"{pessoa['nome']} - {pessoa['idade']} anos")

# Ordenar por nome
pessoas_por_nome = sorted(pessoas, key=lambda pessoa: pessoa["nome"])
print("\nPessoas ordenadas por nome:")
for pessoa in pessoas_por_nome:
    print(f"{pessoa['nome']} - {pessoa['idade']} anos")
                    </div>
                </section>
                
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">8.6 Documenta√ß√£o de Fun√ß√µes (Docstrings)</h2>
                    <p class="text-gray-600 mb-4">
                        Docstrings s√£o strings que documentam o que uma fun√ß√£o faz, seus par√¢metros e retorno.
                    </p>
                    
                    <div class="code-block mb-4">
def calcular_imc(peso, altura):
    """
    Calcula o √çndice de Massa Corporal (IMC).
    
    Par√¢metros:
    peso (float): Peso da pessoa em quilogramas
    altura (float): Altura da pessoa em metros
    
    Retorna:
    float: O valor do IMC calculado
    
    Exemplo:
    >>> calcular_imc(70, 1.75)
    22.86
    """
    imc = peso / (altura ** 2)
    return round(imc, 2)

def classificar_imc(imc):
    """
    Classifica o IMC de acordo com os padr√µes da OMS.
    
    Par√¢metros:
    imc (float): Valor do IMC
    
    Retorna:
    str: Classifica√ß√£o do IMC
    """
    if imc < 18.5:
        return "Abaixo do peso"
    elif imc < 25:
        return "Peso normal"
    elif imc < 30:
        return "Sobrepeso"
    else:
        return "Obesidade"

# Testando as fun√ß√µes
peso = 70
altura = 1.75
imc = calcular_imc(peso, altura)
classificacao = classificar_imc(imc)

print(f"Peso: {peso} kg")
print(f"Altura: {altura} m")
print(f"IMC: {imc}")
print(f"Classifica√ß√£o: {classificacao}")

# Acessando a documenta√ß√£o
print("\nDocumenta√ß√£o da fun√ß√£o calcular_imc:")
print(calcular_imc.__doc__)

# Usando help() para ver documenta√ß√£o completa
# help(calcular_imc)
                    </div>
                </section>
                
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">8.7 Fun√ß√µes Recursivas</h2>
                    <p class="text-gray-600 mb-4">
                        Recurs√£o √© quando uma fun√ß√£o chama a si mesma. √ötil para problemas que podem 
                        ser divididos em subproblemas similares.
                    </p>
                    
                    <div class="warning-box">
                        <h3 class="font-semibold text-amber-800 mb-2">‚ö†Ô∏è Cuidado com Recurs√£o</h3>
                        <p class="text-amber-700">
                            Sempre defina uma condi√ß√£o de parada (caso base) para evitar recurs√£o infinita!
                        </p>
                    </div>
                    
                    <div class="code-block mb-4">
# Exemplo cl√°ssico: Fatorial
def fatorial(n):
    """
    Calcula o fatorial de um n√∫mero usando recurs√£o.
    
    Par√¢metros:
    n (int): N√∫mero para calcular o fatorial
    
    Retorna:
    int: Fatorial de n
    """
    # Caso base
    if n == 0 or n == 1:
        return 1
    # Caso recursivo
    else:
        return n * fatorial(n - 1)

# Testando fatorial
for i in range(6):
    print(f"{i}! = {fatorial(i)}")

# Sequ√™ncia de Fibonacci
def fibonacci(n):
    """
    Retorna o n-√©simo n√∫mero da sequ√™ncia de Fibonacci.
    
    Par√¢metros:
    n (int): Posi√ß√£o na sequ√™ncia (come√ßando em 0)
    
    Retorna:
    int: N-√©simo n√∫mero de Fibonacci
    """
    if n <= 1:
        return n
    else:
        return fibonacci(n - 1) + fibonacci(n - 2)

# Testando Fibonacci
print("\nSequ√™ncia de Fibonacci:")
for i in range(10):
    print(f"F({i}) = {fibonacci(i)}")

# Contagem regressiva
def contagem_regressiva(n):
    """
    Faz uma contagem regressiva usando recurs√£o.
    
    Par√¢metros:
    n (int): N√∫mero inicial da contagem
    """
    if n <= 0:
        print("üöÄ Decolagem!")
    else:
        print(f"Contagem: {n}")
        contagem_regressiva(n - 1)

print("\nContagem regressiva:")
contagem_regressiva(5)

# Soma de lista usando recurs√£o
def somar_lista(lista):
    """
    Soma todos os elementos de uma lista usando recurs√£o.
    
    Par√¢metros:
    lista (list): Lista de n√∫meros
    
    Retorna:
    int/float: Soma dos elementos
    """
    if not lista:  # Lista vazia
        return 0
    else:
        return lista[0] + somar_lista(lista[1:])

numeros = [1, 2, 3, 4, 5]
print(f"\nSoma da lista {numeros}: {somar_lista(numeros)}")
                    </div>
                </section>
                
                <section>
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">Exerc√≠cios Pr√°ticos</h2>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold text-blue-800 mb-3">Exerc√≠cio 1: Calculadora de Fun√ß√µes</h3>
                        <p class="text-blue-700 mb-4">
                            Crie uma calculadora que use fun√ß√µes para cada opera√ß√£o matem√°tica b√°sica. 
                            Inclua um menu para o usu√°rio escolher a opera√ß√£o.
                        </p>
                        
                        <button onclick="toggleSolution('sol1')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                            Ver solu√ß√£o
                        </button>
                        
                        <div id="sol1" class="solution mt-4">
                            <div class="code-block">
# Calculadora com Fun√ß√µes
print("=== CALCULADORA AVAN√áADA ===")

def somar(a, b):
    """Retorna a soma de dois n√∫meros."""
    return a + b

def subtrair(a, b):
    """Retorna a subtra√ß√£o de dois n√∫meros."""
    return a - b

def multiplicar(a, b):
    """Retorna a multiplica√ß√£o de dois n√∫meros."""
    return a * b

def dividir(a, b):
    """Retorna a divis√£o de dois n√∫meros."""
    if b == 0:
        return "Erro: Divis√£o por zero!"
    return a / b

def potencia(a, b):
    """Retorna a pot√™ncia de a elevado a b."""}]}}}
    return a ** b

def raiz_quadrada(a):
    """Retorna a raiz quadrada de um n√∫mero."""
    if a < 0:
        return "Erro: Raiz de n√∫mero negativo!"
    return a ** 0.5

def porcentagem(valor, percentual):
    """Calcula a porcentagem de um valor."""
    return (valor * percentual) / 100

def obter_numeros():
    """Obt√©m dois n√∫meros do usu√°rio."""
    try:
        a = float(input("Digite o primeiro n√∫mero: "))
        b = float(input("Digite o segundo n√∫mero: "))
        return a, b
    except ValueError:
        print("Erro: Digite n√∫meros v√°lidos!")
        return None, None

def obter_numero():
    """Obt√©m um n√∫mero do usu√°rio."""
    try:
        return float(input("Digite um n√∫mero: "))
    except ValueError:
        print("Erro: Digite um n√∫mero v√°lido!")
        return None

def exibir_menu():
    """Exibe o menu de op√ß√µes."""
    print("\n" + "="*40)
    print("           CALCULADORA")
    print("="*40)
    print("1. Somar")
    print("2. Subtrair")
    print("3. Multiplicar")
    print("4. Dividir")
    print("5. Pot√™ncia")
    print("6. Raiz Quadrada")
    print("7. Porcentagem")
    print("8. Hist√≥rico")
    print("9. Limpar Hist√≥rico")
    print("0. Sair")
    print("="*40)

def adicionar_historico(operacao, resultado):
    """Adiciona opera√ß√£o ao hist√≥rico."""
    historico.append(f"{operacao} = {resultado}")

def exibir_historico():
    """Exibe o hist√≥rico de opera√ß√µes."""
    if not historico:
        print("Hist√≥rico vazio!")
        return
    
    print("\n=== HIST√ìRICO ===")
    for i, operacao in enumerate(historico, 1):
        print(f"{i:2d}. {operacao}")

# Lista para armazenar hist√≥rico
historico = []

# Loop principal
while True:
    exibir_menu()
    opcao = input("Escolha uma op√ß√£o: ")
    
    if opcao == "1":
        a, b = obter_numeros()
        if a is not None and b is not None:
            resultado = somar(a, b)
            print(f"Resultado: {a} + {b} = {resultado}")
            adicionar_historico(f"{a} + {b}", resultado)
    
    elif opcao == "2":
        a, b = obter_numeros()
        if a is not None and b is not None:
            resultado = subtrair(a, b)
            print(f"Resultado: {a} - {b} = {resultado}")
            adicionar_historico(f"{a} - {b}", resultado)
    
    elif opcao == "3":
        a, b = obter_numeros()
        if a is not None and b is not None:
            resultado = multiplicar(a, b)
            print(f"Resultado: {a} √ó {b} = {resultado}")
            adicionar_historico(f"{a} √ó {b}", resultado)
    
    elif opcao == "4":
        a, b = obter_numeros()
        if a is not None and b is not None:
            resultado = dividir(a, b)
            print(f"Resultado: {a} √∑ {b} = {resultado}")
            if isinstance(resultado, (int, float)):
                adicionar_historico(f"{a} √∑ {b}", resultado)
    
    elif opcao == "5":
        a, b = obter_numeros()
        if a is not None and b is not None:
            resultado = potencia(a, b)
            print(f"Resultado: {a} ^ {b} = {resultado}")
            adicionar_historico(f"{a} ^ {b}", resultado)
    
    elif opcao == "6":
        a = obter_numero()
        if a is not None:
            resultado = raiz_quadrada(a)
            print(f"Resultado: ‚àö{a} = {resultado}")
            if isinstance(resultado, (int, float)):
                adicionar_historico(f"‚àö{a}", resultado)
    
    elif opcao == "7":
        print("C√°lculo de porcentagem:")
        valor = obter_numero()
        if valor is not None:
            print("Digite o percentual:")
            percentual = obter_numero()
            if percentual is not None:
                resultado = porcentagem(valor, percentual)
                print(f"Resultado: {percentual}% de {valor} = {resultado}")
                adicionar_historico(f"{percentual}% de {valor}", resultado)
    
    elif opcao == "8":
        exibir_historico()
    
    elif opcao == "9":
        historico.clear()
        print("Hist√≥rico limpo!")
    
    elif opcao == "0":
        print("Saindo da calculadora...")
        break
    
    else:
        print("Op√ß√£o inv√°lida! Tente novamente.")
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold text-green-800 mb-3">Exerc√≠cio 2: Sistema de Valida√ß√£o</h3>
                        <p class="text-green-700 mb-4">
                            Crie fun√ß√µes para validar diferentes tipos de dados: CPF, email, telefone, 
                            senha forte, etc. Use essas fun√ß√µes em um sistema de cadastro.
                        </p>
                        
                        <button onclick="toggleSolution('sol2')" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            Ver solu√ß√£o
                        </button>
                        
                        <div id="sol2" class="solution mt-4">
                            <div class="code-block">
# Sistema de Valida√ß√£o
import re

print("=== SISTEMA DE VALIDA√á√ÉO ===")

def validar_cpf(cpf):
    """
    Valida um CPF brasileiro.
    
    Par√¢metros:
    cpf (str): CPF a ser validado
    
    Retorna:
    bool: True se v√°lido, False caso contr√°rio
    """
    # Remove caracteres n√£o num√©ricos
    cpf = re.sub(r'\D', '', cpf)
    
    # Verifica se tem 11 d√≠gitos
    if len(cpf) != 11:
        return False
    
    # Verifica se todos os d√≠gitos s√£o iguais
    if cpf == cpf[0] * 11:
        return False
    
    # Calcula primeiro d√≠gito verificador
    soma = sum(int(cpf[i]) * (10 - i) for i in range(9))
    primeiro_digito = (soma * 10) % 11
    if primeiro_digito == 10:
        primeiro_digito = 0
    
    # Calcula segundo d√≠gito verificador
    soma = sum(int(cpf[i]) * (11 - i) for i in range(10))
    segundo_digito = (soma * 10) % 11
    if segundo_digito == 10:
        segundo_digito = 0
    
    # Verifica se os d√≠gitos calculados conferem
    return cpf[-2:] == f"{primeiro_digito}{segundo_digito}"

def validar_email(email):
    """
    Valida um endere√ßo de email.
    
    Par√¢metros:
    email (str): Email a ser validado
    
    Retorna:
    bool: True se v√°lido, False caso contr√°rio
    """
    padrao = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    return re.match(padrao, email) is not None

def validar_telefone(telefone):
    """
    Valida um n√∫mero de telefone brasileiro.
    
    Par√¢metros:
    telefone (str): Telefone a ser validado
    
    Retorna:
    bool: True se v√°lido, False caso contr√°rio
    """
    # Remove caracteres n√£o num√©ricos
    telefone = re.sub(r'\D', '', telefone)
    
    # Verifica se tem 10 ou 11 d√≠gitos (com DDD)
    if len(telefone) not in [10, 11]:
        return False
    
    # Verifica se o DDD √© v√°lido (11 a 99)
    ddd = int(telefone[:2])
    if ddd < 11 or ddd > 99:
        return False
    
    return True

def validar_senha_forte(senha):
    """
    Valida se uma senha √© forte.
    
    Crit√©rios:
    - Pelo menos 8 caracteres
    - Pelo menos uma letra min√∫scula
    - Pelo menos uma letra mai√∫scula
    - Pelo menos um n√∫mero
    - Pelo menos um caractere especial
    
    Par√¢metros:
    senha (str): Senha a ser validada
    
    Retorna:
    tuple: (bool, list) - (√©_v√°lida, lista_de_problemas)
    """
    problemas = []
    
    if len(senha) < 8:
        problemas.append("Deve ter pelo menos 8 caracteres")
    
    if not re.search(r'[a-z]', senha):
        problemas.append("Deve ter pelo menos uma letra min√∫scula")
    
    if not re.search(r'[A-Z]', senha):
        problemas.append("Deve ter pelo menos uma letra mai√∫scula")
    
    if not re.search(r'\d', senha):
        problemas.append("Deve ter pelo menos um n√∫mero")
    
    if not re.search(r'[!@#$%^&*(),.?":{}|<>]', senha):
        problemas.append("Deve ter pelo menos um caractere especial")
    
    return len(problemas) == 0, problemas

def validar_nome(nome):
    """
    Valida um nome.
    
    Par√¢metros:
    nome (str): Nome a ser validado
    
    Retorna:
    bool: True se v√°lido, False caso contr√°rio
    """
    # Remove espa√ßos extras
    nome = nome.strip()
    
    # Verifica se n√£o est√° vazio e tem pelo menos 2 caracteres
    if len(nome) < 2:
        return False
    
    # Verifica se cont√©m apenas letras e espa√ßos
    return re.match(r'^[a-zA-ZÔøΩ?-ÔøΩ\s]+$', nome) is not None

def validar_idade(idade_str):
    """
    Valida uma idade.
    
    Par√¢metros:
    idade_str (str): Idade como string
    
    Retorna:
    tuple: (bool, int) - (√©_v√°lida, idade_convertida)
    """
    try:
        idade = int(idade_str)
        if 0 <= idade <= 120:
            return True, idade
        else:
            return False, None
    except ValueError:
        return False, None

def cadastrar_usuario():
    """
    Realiza o cadastro de um usu√°rio com valida√ß√µes.
    """
    print("\n=== CADASTRO DE USU√ÅRIO ===")
    
    # Validar nome
    while True:
        nome = input("Nome completo: ").strip()
        if validar_nome(nome):
            break
        else:
            print("‚ùå Nome inv√°lido! Use apenas letras e espa√ßos.")
    
    # Validar idade
    while True:
        idade_str = input("Idade: ")
        valida, idade = validar_idade(idade_str)
        if valida:
            break
        else:
            print("‚ùå Idade inv√°lida! Digite um n√∫mero entre 0 e 120.")
    
    # Validar CPF
    while True:
        cpf = input("CPF: ")
        if validar_cpf(cpf):
            break
        else:
            print("‚ùå CPF inv√°lido! Verifique os d√≠gitos.")
    
    # Validar email
    while True:
        email = input("Email: ")
        if validar_email(email):
            break
        else:
            print("‚ùå Email inv√°lido! Use o formato: usuario@dominio.com")
    
    # Validar telefone
    while True:
        telefone = input("Telefone (com DDD): ")
        if validar_telefone(telefone):
            break
        else:
            print("‚ùå Telefone inv√°lido! Use formato: (11) 99999-9999")
    
    # Validar senha
    while True:
        senha = input("Senha: ")
        valida, problemas = validar_senha_forte(senha)
        if valida:
            break
        else:
            print("‚ùå Senha fraca! Problemas encontrados:")
            for problema in problemas:
                print(f"   ‚Ä¢ {problema}")
    
    # Confirmar senha
    while True:
        confirmar_senha = input("Confirme a senha: ")
        if senha == confirmar_senha:
            break
        else:
            print("‚ùå Senhas n√£o conferem!")
    
    # Exibir dados cadastrados
    print("\n‚úÖ USU√ÅRIO CADASTRADO COM SUCESSO!")
    print("="*40)
    print(f"Nome: {nome}")
    print(f"Idade: {idade} anos")
    print(f"CPF: {cpf}")
    print(f"Email: {email}")
    print(f"Telefone: {telefone}")
    print("Senha: ********")
    print("="*40)

def testar_validacoes():
    """
    Testa as fun√ß√µes de valida√ß√£o com exemplos.
    """
    print("\n=== TESTE DAS VALIDA√á√ïES ===")
    
    # Teste CPF
    cpfs_teste = ["11144477735", "123.456.789-09", "000.000.000-00", "12345678901"]
    print("\nTeste de CPF:")
    for cpf in cpfs_teste:
        resultado = "‚úÖ V√°lido" if validar_cpf(cpf) else "‚ùå Inv√°lido"
        print(f"{cpf}: {resultado}")
    
    # Teste Email
    emails_teste = ["usuario@email.com", "teste@", "email.com", "user@domain.co.uk"]
    print("\nTeste de Email:")
    for email in emails_teste:
        resultado = "‚úÖ V√°lido" if validar_email(email) else "‚ùå Inv√°lido"
        print(f"{email}: {resultado}")
    
    # Teste Senha
    senhas_teste = ["123456", "MinhaSenh@123", "senha", "SENHA123!"]
    print("\nTeste de Senha:")
    for senha in senhas_teste:
        valida, problemas = validar_senha_forte(senha)
        if valida:
            print(f"{senha}: ‚úÖ Forte")
        else:
            print(f"{senha}: ‚ùå Fraca - {', '.join(problemas)}")

# Menu principal
while True:
    print("\n=== MENU PRINCIPAL ===")
    print("1. Cadastrar usu√°rio")
    print("2. Testar valida√ß√µes")
    print("3. Sair")
    
    opcao = input("Escolha uma op√ß√£o: ")
    
    if opcao == "1":
        cadastrar_usuario()
    elif opcao == "2":
        testar_validacoes()
    elif opcao == "3":
        print("Saindo do sistema...")
        break
    else:
        print("Op√ß√£o inv√°lida!")
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-purple-800 mb-3">Exerc√≠cio 3: Gerador de Relat√≥rios</h3>
                        <p class="text-purple-700 mb-4">
                            Crie um sistema que gere relat√≥rios de vendas usando fun√ß√µes para calcular 
                            estat√≠sticas, formatar dados e exportar resultados.
                        </p>
                        
                        <button onclick="toggleSolution('sol3')" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                            Ver solu√ß√£o
                        </button>
                        
                        <div id="sol3" class="solution mt-4">
                            <div class="code-block">
# Gerador de Relat√≥rios de Vendas
from datetime import datetime, timedelta
import random

print("=== GERADOR DE RELAT√ìRIOS DE VENDAS ===")

# Dados de exemplo
vendedores = ["Ana Silva", "Bruno Santos", "Carlos Oliveira", "Diana Costa", "Eduardo Lima"]
produtos = [
    {"nome": "Notebook", "preco": 2500.00, "categoria": "Eletr√¥nicos"},
    {"nome": "Mouse", "preco": 50.00, "categoria": "Acess√≥rios"},
    {"nome": "Teclado", "preco": 150.00, "categoria": "Acess√≥rios"},
    {"nome": "Monitor", "preco": 800.00, "categoria": "Eletr√¥nicos"},
    {"nome": "Impressora", "preco": 400.00, "categoria": "Equipamentos"},
    {"nome": "Webcam", "preco": 200.00, "categoria": "Acess√≥rios"}
]

def gerar_vendas_aleatorias(quantidade=50):
    """
    Gera vendas aleat√≥rias para demonstra√ß√£o.
    
    Par√¢metros:
    quantidade (int): N√∫mero de vendas a gerar
    
    Retorna:
    list: Lista de vendas
    """
    vendas = []
    data_inicio = datetime.now() - timedelta(days=30)
    
    for _ in range(quantidade):
        venda = {
            "id": len(vendas) + 1,
            "vendedor": random.choice(vendedores),
            "produto": random.choice(produtos),
            "quantidade": random.randint(1, 5),
            "data": data_inicio + timedelta(days=random.randint(0, 30)),
            "desconto": random.choice([0, 5, 10, 15])  # Percentual de desconto
        }
        
        # Calcula valor total
        valor_bruto = venda["produto"]["preco"] * venda["quantidade"]
        valor_desconto = valor_bruto * (venda["desconto"] / 100)
        venda["valor_total"] = valor_bruto - valor_desconto
        
        vendas.append(venda)
    
    return vendas

def calcular_total_vendas(vendas):
    """
    Calcula o total de vendas.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    
    Retorna:
    float: Total de vendas
    """
    return sum(venda["valor_total"] for venda in vendas)

def calcular_vendas_por_vendedor(vendas):
    """
    Calcula vendas agrupadas por vendedor.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    
    Retorna:
    dict: Vendas por vendedor
    """
    vendas_vendedor = {}
    
    for venda in vendas:
        vendedor = venda["vendedor"]
        if vendedor not in vendas_vendedor:
            vendas_vendedor[vendedor] = {
                "total_vendas": 0,
                "quantidade_vendas": 0,
                "produtos_vendidos": 0
            }
        
        vendas_vendedor[vendedor]["total_vendas"] += venda["valor_total"]
        vendas_vendedor[vendedor]["quantidade_vendas"] += 1
        vendas_vendedor[vendedor]["produtos_vendidos"] += venda["quantidade"]
    
    return vendas_vendedor

def calcular_vendas_por_produto(vendas):
    """
    Calcula vendas agrupadas por produto.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    
    Retorna:
    dict: Vendas por produto
    """
    vendas_produto = {}
    
    for venda in vendas:
        produto = venda["produto"]["nome"]
        if produto not in vendas_produto:
            vendas_produto[produto] = {
                "quantidade_vendida": 0,
                "receita_total": 0,
                "numero_vendas": 0,
                "categoria": venda["produto"]["categoria"]
            }
        
        vendas_produto[produto]["quantidade_vendida"] += venda["quantidade"]
        vendas_produto[produto]["receita_total"] += venda["valor_total"]
        vendas_produto[produto]["numero_vendas"] += 1
    
    return vendas_produto

def calcular_vendas_por_categoria(vendas):
    """
    Calcula vendas agrupadas por categoria.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    
    Retorna:
    dict: Vendas por categoria
    """
    vendas_categoria = {}
    
    for venda in vendas:
        categoria = venda["produto"]["categoria"]
        if categoria not in vendas_categoria:
            vendas_categoria[categoria] = {
                "receita_total": 0,
                "quantidade_vendas": 0
            }
        
        vendas_categoria[categoria]["receita_total"] += venda["valor_total"]
        vendas_categoria[categoria]["quantidade_vendas"] += 1
    
    return vendas_categoria

def formatar_moeda(valor):
    """
    Formata um valor como moeda brasileira.
    
    Par√¢metros:
    valor (float): Valor a ser formatado
    
    Retorna:
    str: Valor formatado
    """
    return f"R$ {valor:,.2f}".replace(',', 'X').replace('.', ',').replace('X', '.')

def gerar_relatorio_geral(vendas):
    """
    Gera relat√≥rio geral de vendas.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    """
    print("\n" + "="*60)
    print("                RELAT√ìRIO GERAL DE VENDAS")
    print("="*60)
    
    total_vendas = calcular_total_vendas(vendas)
    total_produtos = sum(venda["quantidade"] for venda in vendas)
    numero_vendas = len(vendas)
    ticket_medio = total_vendas / numero_vendas if numero_vendas > 0 else 0
    
    print(f"Per√≠odo: {min(venda['data'] for venda in vendas).strftime('%d/%m/%Y')} a {max(venda['data'] for venda in vendas).strftime('%d/%m/%Y')}")
    print(f"Total de vendas: {formatar_moeda(total_vendas)}")
    print(f"N√∫mero de transa√ß√µes: {numero_vendas}")
    print(f"Produtos vendidos: {total_produtos} unidades")
    print(f"Ticket m√©dio: {formatar_moeda(ticket_medio)}")
    
    # Top vendedor
    vendas_vendedor = calcular_vendas_por_vendedor(vendas)
    top_vendedor = max(vendas_vendedor.items(), key=lambda x: x[1]["total_vendas"])
    print(f"\nMelhor vendedor: {top_vendedor[0]}")
    print(f"Vendas: {formatar_moeda(top_vendedor[1]['total_vendas'])}")
    
    # Top produto
    vendas_produto = calcular_vendas_por_produto(vendas)
    top_produto = max(vendas_produto.items(), key=lambda x: x[1]["receita_total"])
    print(f"\nProduto mais vendido (receita): {top_produto[0]}")
    print(f"Receita: {formatar_moeda(top_produto[1]['receita_total'])}")

def gerar_relatorio_vendedores(vendas):
    """
    Gera relat√≥rio detalhado por vendedor.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    """
    print("\n" + "="*80)
    print("                    RELAT√ìRIO POR VENDEDOR")
    print("="*80)
    
    vendas_vendedor = calcular_vendas_por_vendedor(vendas)
    
    # Ordena por total de vendas (decrescente)
    vendedores_ordenados = sorted(vendas_vendedor.items(), 
                                key=lambda x: x[1]["total_vendas"], 
                                reverse=True)
    
    for i, (vendedor, dados) in enumerate(vendedores_ordenados, 1):
        ticket_medio = dados["total_vendas"] / dados["quantidade_vendas"]
        
        print(f"\n{i}¬∫ LUGAR - {vendedor}")
        print("-" * 50)
        print(f"Total em vendas: {formatar_moeda(dados['total_vendas'])}")
        print(f"N√∫mero de vendas: {dados['quantidade_vendas']}")
        print(f"Produtos vendidos: {dados['produtos_vendidos']} unidades")
        print(f"Ticket m√©dio: {formatar_moeda(ticket_medio)}")

def gerar_relatorio_produtos(vendas):
    """
    Gera relat√≥rio detalhado por produto.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    """
    print("\n" + "="*80)
    print("                    RELAT√ìRIO POR PRODUTO")
    print("="*80)
    
    vendas_produto = calcular_vendas_por_produto(vendas)
    
    # Ordena por receita total (decrescente)
    produtos_ordenados = sorted(vendas_produto.items(), 
                              key=lambda x: x[1]["receita_total"], 
                              reverse=True)
    
    for i, (produto, dados) in enumerate(produtos_ordenados, 1):
        receita_media = dados["receita_total"] / dados["numero_vendas"]
        
        print(f"\n{i}¬∫ - {produto} ({dados['categoria']})")
        print("-" * 50)
        print(f"Receita total: {formatar_moeda(dados['receita_total'])}")
        print(f"Quantidade vendida: {dados['quantidade_vendida']} unidades")
        print(f"N√∫mero de vendas: {dados['numero_vendas']}")
        print(f"Receita m√©dia por venda: {formatar_moeda(receita_media)}")

def gerar_relatorio_categorias(vendas):
    """
    Gera relat√≥rio por categoria de produto.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    """
    print("\n" + "="*60)
    print("                RELAT√ìRIO POR CATEGORIA")
    print("="*60)
    
    vendas_categoria = calcular_vendas_por_categoria(vendas)
    total_geral = calcular_total_vendas(vendas)
    
    # Ordena por receita total (decrescente)
    categorias_ordenadas = sorted(vendas_categoria.items(), 
                                key=lambda x: x[1]["receita_total"], 
                                reverse=True)
    
    for categoria, dados in categorias_ordenadas:
        percentual = (dados["receita_total"] / total_geral) * 100
        
        print(f"\n{categoria}")
        print("-" * 30)
        print(f"Receita: {formatar_moeda(dados['receita_total'])}")
        print(f"Participa√ß√£o: {percentual:.1f}%")
        print(f"N√∫mero de vendas: {dados['quantidade_vendas']}")

def exportar_relatorio_csv(vendas, nome_arquivo="relatorio_vendas.csv"):
    """
    Exporta relat√≥rio para arquivo CSV.
    
    Par√¢metros:
    vendas (list): Lista de vendas
    nome_arquivo (str): Nome do arquivo
    """
    try:
        with open(nome_arquivo, 'w', encoding='utf-8') as arquivo:
            # Cabe√ßalho
            arquivo.write("ID,Data,Vendedor,Produto,Categoria,Quantidade,Valor_Unitario,Desconto,Valor_Total\n")
            
            # Dados
            for venda in vendas:
                linha = f"{venda['id']},{venda['data'].strftime('%d/%m/%Y')},{venda['vendedor']},{venda['produto']['nome']},{venda['produto']['categoria']},{venda['quantidade']},{venda['produto']['preco']:.2f},{venda['desconto']}%,{venda['valor_total']:.2f}\n"
                arquivo.write(linha)
        
        print(f"\n‚úÖ Relat√≥rio exportado para: {nome_arquivo}")
    except Exception as e:
        print(f"\n‚ùå Erro ao exportar: {e}")

# Gerar dados de exemplo
vendas_exemplo = gerar_vendas_aleatorias(100)

# Menu principal
while True:
    print("\n=== MENU DE RELAT√ìRIOS ===")
    print("1. Relat√≥rio Geral")
    print("2. Relat√≥rio por Vendedor")
    print("3. Relat√≥rio por Produto")
    print("4. Relat√≥rio por Categoria")
    print("5. Exportar para CSV")
    print("6. Gerar novos dados")
    print("7. Sair")
    
    opcao = input("Escolha uma op√ß√£o: ")
    
    if opcao == "1":
        gerar_relatorio_geral(vendas_exemplo)
    elif opcao == "2":
        gerar_relatorio_vendedores(vendas_exemplo)
    elif opcao == "3":
        gerar_relatorio_produtos(vendas_exemplo)
    elif opcao == "4":
        gerar_relatorio_categorias(vendas_exemplo)
    elif opcao == "5":
        nome = input("Nome do arquivo (ou Enter para padr√£o): ").strip()
        if not nome:
            nome = "relatorio_vendas.csv"
        exportar_relatorio_csv(vendas_exemplo, nome)
    elif opcao == "6":
        quantidade = input("Quantidade de vendas (ou Enter para 100): ").strip()
        try:
            quantidade = int(quantidade) if quantidade else 100
            vendas_exemplo = gerar_vendas_aleatorias(quantidade)
            print(f"‚úÖ {quantidade} vendas geradas!")
        except ValueError:
            print("‚ùå Quantidade inv√°lida!")
    elif opcao == "7":
        print("Saindo do sistema...")
        break
    else:
        print("Op√ß√£o inv√°lida!")
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="mt-8">
                    <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">Resumo do Cap√≠tulo</h2>
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Defini√ß√£o:</strong> Use <code>def nome_funcao():</code> para criar fun√ß√µes</li>
                            <li><strong>Par√¢metros:</strong> Valores que a fun√ß√£o recebe para processar</li>
                            <li><strong>Return:</strong> Use <code>return</code> para retornar valores</li>
                            <li><strong>Argumentos:</strong> Posicionais, nomeados, *args, **kwargs</li>
                            <li><strong>Escopo:</strong> Vari√°veis locais vs globais, use <code>global</code> quando necess√°rio</li>
                            <li><strong>Lambda:</strong> Fun√ß√µes an√¥nimas para opera√ß√µes simples</li>
                            <li><strong>Docstrings:</strong> Documente suas fun√ß√µes com """texto"""</li>
                            <li><strong>Recurs√£o:</strong> fun√ß√£o que chama a si mesma (defina caso base!)</li>
                        </ul>
                    </div>
                </section>
                
                <div class="flex justify-between mt-8">
                    <a href="capitulo7.html" class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 w-full md:w-auto">
                        &larr; Cap√≠tulo Anterior
                    </a>
                    <a href="capitulo9.html" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 w-full md:w-auto">
                        Pr√≥ximo Cap√≠tulo &rarr;
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function toggleSolution(id) {
            const solution = document.getElementById(id);
            solution.classList.toggle('show');
        }
    </script>
    
    <footer style="position: fixed; bottom: 10px; right: 10px; font-size: 12px; color: #666; background: rgba(255,255,255,0.9); padding: 5px 10px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        @Salom√£o Leme | 2025
    </footer>
</body>
</html>


